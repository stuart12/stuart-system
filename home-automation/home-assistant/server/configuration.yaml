homeassistant:
  # Name of the location where Home Assistant is running
  name: server
  # Location required to calculate the time the sun rises and sets
  latitude: 49.3812
  longitude: 2.3862
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 81
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/Paris

zwave:
  network_key: !secret network_key
  usb_path: /dev/ttyACM0

# Show links to resources in log and frontend
#introduction:

# Enables the frontend
frontend:

# Enables configuration UI
config:

http:
  api_password: !secret http
  server_host: 127.0.0.1
  trusted_networks:
    - 127.0.0.1

# Checks for available updates
updater:

# Discover some devices automatically
discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
#conversation:

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
#sun:

# Weather Prediction
#sensor:
#platform: yr

# Text to speech
#tts:
#platform: google

#lirc:
#media_player:
#- platform: vlc
#arguments: --aout pulseaudio

keyboard_remote:
  device_name: 'USB Keyboard'
  type: 'key_down'

automation:
  - alias: VMC pause
    trigger:
      platform: event
      event_type: keyboard_remote_command_received
      event_data:
        key_code: 43 # KEY_BACKSLASH
    action:
      - service: switch.turn_off
      - delay: '01:00:00'
      - service: switch.turn_on
  - alias: Radio_RFI
    trigger:
      platform: event
      event_type: keyboard_remote_command_received
      event_data:
        key_code: 19 # KEY_R
    action:
      - service: mqtt.publish
        data:
          topic: 'message'
          payload: 'radio_RFI'
  - alias: France Culture
    trigger:
      platform: event
      event_type: keyboard_remote_command_received
      event_data:
        key_code: 46 # KEY_C
    action:
      - service: mqtt.publish
        data:
          topic: 'radio'
          payload: 'France Culture'
  - alias: leaving
    trigger:
      platform: event
      event_type: keyboard_remote_command_received
      event_data:
        key_code: 57 # KEY_SPACE
    action:
      - service: mqtt.publish
        data:
          topic: 'message'
          payload: 'leaving'
  - alias: Blink
    trigger:
      platform: event
      event_type: ir_command_received
    action:
      service: shell_command.blink
  - alias: mute
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_POWER
    action:
      service: shell_command.mute
  - alias: Sleep
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_ENTER
    action:
      service: shell_command.mute
  - alias: BBC World Service
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_RIGHT
    action:
      service: shell_command.bbc_world_service
  - alias: France Inter
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_DOWN
    action:
      service: shell_command.france_inter
  - alias: ABC Radio National
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_LEFT
    action:
      service: shell_command.abc_radio_national
  - alias: France Culture
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_UP
    action:
      service: shell_command.france_culture
  - alias: RFI
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_OK
    action:
            #service: media_player.play_media
            #data:
            #media_content_id: http://www.radio-browser.info/webservice/v2/pls/url/29859
            #media_content_type: music
            service: shell_command.rfi
  - alias: Volume Down
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_CHANNELDOWN
    action:
      service: shell_command.hpmini110_volume_down
  - alias: Volume Up
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_CHANNELUP
    action:
      service: shell_command.hpmini110_volume_up
  - alias: Democracy Now
    trigger:
      platform: event
      event_type: ir_command_received
      event_data:
        button_name: KEY_TV
    action:
      service: shell_command.democracy_now

shell_command:
  hpmini110_volume_up: 'amixer -c 0 set Master 8%+'
  hpmini110_volume_down: 'amixer -q -c 0 set Master 8%-'
  rfi: 'mute; rfi &'
  mute: 'mute &'
  blink: 'delcom-control --blink'
  france_culture: 'ha-radio-browser "France Culture" &'
  abc_radio_national: 'ha-radio-browser "ABC Radio National MP3" &'
  bbc_world_service: 'ha-radio-browser "BBC World Service (MP3)" &'
  france_inter: 'ha-radio-browser "France Inter" &'
  democracy_now: 'mute; playnewestpod http://www.democracynow.org/podcast.xml'

# https://home-assistant.io/components/mqtt_eventstream/
#mqtt_eventstream:
#  subscribe_topic: slaves/#
#  publish_topic: master/topic
  #publish_eventstream_received: true

mqtt:
  broker: stuartpi3
  client_id: server

#mqtt_statestream:
#  base_topic: server

# https://home-assistant.io/docs/mqtt/logging/
logger:
  default: warn
  logs:
    homeassistant.components.mqtt: info
